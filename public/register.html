<!DOCTYPE html>
<html>
	
	<header>
	    <meta charset="UTF-8" /> 
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js" ></script>
		<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js" ></script>
		<script src = "/javascript/register.js" > </script>
		<script type="text/javascript">
		var id;
		
		function init() {
			var matches = /id=([^&#=]*)/.exec(window.location.search);
			id = matches[1];
			
			angular.element(document.getElementById('main')).scope().id = id;
			angular.element(document.getElementById('main')).scope().getData(id);
	    }
		</script>
		
		<script type="text/javascript">
		function update(){
	    	/*
	    	if (validate() 
	    		&& validateMobile() 
	    		&& validateStreet() 
	    		&& validateDistrict() 
	    		&& validateState() 
	    		&& validatePostcode() 
	    		&& validateCountry() 
	    		&& validateParent() 
	    		&& validateParentPhone() 
	    		&& validateParentIncome() 
	    		&&  validateParent2() 
	    		&& validateParentPhone2())
	    	{
	    		angular.element(document.getElementById('main')).scope().updateData(id);
	    	}
	        */
	        var sss = validate_sex() 
	        && validate_title_th()
	        && validate_name_th()
	        && validate_title_en();
	        if ( sss
	        		&& validate()
		    		&& validateMobile() 
		    		&& validateStreet() 
		    		&& validateDistrict() 
		    		&& validateState() 
		    		&& validatePostcode() 
		    		&& validateCountry() 
		    		&& validateParent() 
		    		&& validateParentPhone() 
		    		&& validateParentIncome() 
		    		&&  validateParent2() 
		    		&& validateParentPhone2())
		    	{
		    		alert('test');
		    		//angular.element(document.getElementById('main')).scope().updateData(id);
		    	}
	        
	    }
		
		
		
		function validate_sex(){
			$("#lbl_gender__c").text("");

			var value = $("#pick_gender__c :selected").val();

			if ((value=="")||(value=="?")) {
				$("#lbl_gender__c").text("Please select sex.");
				$("#lbl_gender__c").css("color", "red");
				return false;
			}
			return true;
		}
		
		
		function validate_title_th(){
			$("#lbl_title_th__c").text("");
			$("#lbl_title_th__c").css("color", "red");

			var value = $("#pick_title_th__c :selected").val();

			if ((value=="")||(value=="?")) {
				$("#lbl_title_th__c").text("Please select title.");
				return false;
			}
			return true;
		}
			
		
		function validate_name_th(){
			alert('1');
			$("#lbl_name_th__c").text("");
			$("#lbl_name_th__c").css("color", "red");
			alert('2');
			var fname_th = $("#first_name_th__c").val();
			var lname_th = $("#last_name_th__c").val();
			alert('3  fname='+fname_th+'__ lname='+lname_th);
			
			
			if ((fname_th=="")&&(lname_th=="")) {
				alert('1');
				$("#lbl_name_th__c").text("Please insert name.");
				return false;
			}else if(fname_th==""){
				$("#lbl_name_th__c").text("Please insert first name.");
				return false;
			}else if(lname_th==""){
				$("#lbl_name_th__c").text("Please insert last name.");
				return false;
			}
			alert('e1');
			
			return true;
		}
			

		function validate_title_en(){
			$("#lbl_title_en__c").text("");
			$("#lbl_title_en__c").css("color", "red");
			

			var value = $("#pick_title_en__c :selected").val();

			if ((value=="")||(value=="?")) {
				$("#lbl_title_en__c").text("Please select title.");
				
				return false;
			}
			return true;
		}
		
		
		function validate_name_en(){
			$("#lbl_name_en__c").text("");
			$("#lbl_name_en__c").css("color", "red");
			
			var fname_th = $("#first_name_en__c").text();
			var lname_th = $("#last_name_en__c").text();

			if ((fname_th=="")&&(lname_th=="")) {
				$("#lbl_name_en__c").text("Please insert name.");
				return false;
			}else if(fname_th==""){
				$("#lbl_name_en__c").text("Please insert first name.");
				return false;
			}else if(lname_th==""){
				$("#lbl_name_en__c").text("Please insert last name.");
				return false;
			}
			
			return true;
		}
		
		
		
		
		function validateEmail(myEmail) {
		  var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		  
		  return re.test(myEmail);
		}
	
		function validate() {
		  $("#result").text("");
		  var myEmail = $("#myEmail").val();
		  if (validateEmail(myEmail)) {
		   
		    return true;
		  } else {
		    $("#result").text(myEmail + " is not valid :(");
		    $("#result").css("color", "red");
		    
		    return false;
		  }
		  
		}
	
		$("#validate").bind("click", validate);
			
		function isNumber(field) {
            var re = /^[0-9.]*$/;
            if (!re.test(field.value)) {
                //alert("Input number only!!");
                field.value = field.value.replace(/[^0-9.]/g, "");
            }
        }
			
		function validateMobile() {
			
			$("#mobileResult").text("");
			var myPhone = $("#myPhone").val();
			
			if ($.trim($('#myPhone').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#mobileResult").text("Mobile No. is required");
				$("#mobileResult").css("color", "red");
				    
				return false;
			}
			  
		}
			
		function validateStreet() {
			
			$("#streetResult").text("");
			var myPhone = $("#street").val();
			
			if ($.trim($('#street').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#streetResult").text("No. / Soi / Road is required");
				$("#streetResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateDistrict() {
			
			$("#cityResult").text("");
			var myPhone = $("#city").val();
			
			if ($.trim($('#city').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#cityResult").text("District is required");
				$("#cityResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateState() {
			
			$("#stateResult").text("");
			var myPhone = $("#state").val();
			
			if ($.trim($('#state').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#stateResult").text("Province is required");
				$("#stateResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validatePostcode() {
			
			$("#postcodeResult").text("");
			var myPhone = $("#postcode").val();
			
			if ($.trim($('#postcode').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#postcodeResult").text("Postal Code is required");
				$("#postcodeResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateCountry() {
			
			$("#countryResult").text("");
			var myPhone = $("#country").val();
			
			if ($.trim($('#country').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#countryResult").text("Country is required");
				$("#countryResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateParent() {
			
			$("#parentResult").text("");
			var myPhone = $("#parent").val();
			
			if ($.trim($('#parent').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#parentResult").text("Parent Name is required");
				$("#parentResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateParentPhone() {
			
			$("#parentPhoneResult").text("");
			var myPhone = $("#parentPhone").val();
			
			if ($.trim($('#parentPhone').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#parentPhoneResult").text("Parent Phone is required");
				$("#parentPhoneResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateParentIncome() {
			
			$("#parentIncomeResult").text("");
			var myPhone = $("#parentIncome").val();
			
			if ($.trim($('#parentIncome').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#parentIncomeResult").text("Parent Income is required");
				$("#parentIncomeResult").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateParent2() {
			
			$("#parent2Result").text("");
			var myPhone = $("#parent2").val();
			
			if ($.trim($('#parent2').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#parent2Result").text("Parent Name(2) is required");
				$("#parent2Result").css("color", "red");
				    
				return false;
			}
			  
		}
		
		function validateParentPhone2() {
			
			$("#parentPhone2Result").text("");
			var myPhone = $("#parentPhone2").val();
			
			if ($.trim($('#parentPhone2').val()) != '') {
				/*$("#result").text(myEmail + " is valid :)");
				$("#result").css("color", "green");
				*/
				return true;
			} else {
				$("#parentPhone2Result").text("Parent Phone(2) is required");
				$("#parentPhone2Result").css("color", "red");
				    
				return false;
			}
			  
		}
		
	    </script>
	    <style type="text/css">
	    	.myclass {
				text-transform:uppercase!important;
	     	}
	     	.CustomLayout1{
	        	width : 49%;
	     	}
	
	    	.CustomLayout2{
	        	//background-color: lightblue;  
	         	padding-top:5px; 
	     	}
	     
	    </style>
		
		<script>
	        function colorPageBlock(pageblock) {
	            if (pageblock != null){ pageblock.firstChild.style.cssText = "background-color: #C80000; color: white;";}
	        }
	    </script>
		
	</header>
	
	<body id="main" onload="init();" ng-app="leadApp" ng-controller="mainController">
		<div>
			<table style="width:100%">
				<tr>
					<td colspan ="3" align="center" >
				  
					</td>
				</tr>
				
				<tr style="height:5px">
					<td colspan="3"></td>
				</tr>
				
				<!-- Student Information -->
				
				<tr style="background-color: #C80000">
					<td colspan="3" align="left">
						<b style="color:white">Student Information / ข้อมูลของนักศึกษาผู้จอง</b>
					</td>
				</tr>
				
				<tr style="height:5px">
					<td colspan="3"></td>
				</tr>
				
				<tr>
				
					<td align="center"><table style="width:100%">
					
						<tr>
							<td align="right" class='CustomLayout1' >
								ID Cards / หมายเลขประชาชน
							</td>
							<td></td>
							<td class='CustomLayout1'>
								<input type="text" ng-model="lead.identification_number__c" >
								<label id="lbl_indectification_number__c"/>
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Passport No.
							</td>
							<td></td>
							<td>
								<input type="text" ng-model="lead.passport_number__c">
								<label id="lbl_passport_number__c"/>
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Sex /เพศ
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<select ng-model="lead.gender__c" ng-options="g for g in gender" id='pick_gender__c'></select>
								<label id="lbl_gender__c"/>
							</td>
						</tr>
						
						<tr>
							<td align="right">
								คำนำหน้าชื่อ
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<select ng-model="lead.title_th__c" ng-options="x for x in title" id="pick_title_th__c"></select>
								<label id="lbl_title_th__c"/>
							</td>
						</tr>
						
						<tr>
							<td align="right" class="CustomLayout2" >
								Student Name-Surname/ชื่อ-สกุลนักศึกษา (Thi)
							</td>
							<td class="CustomLayout2">
								<b style="color=red">*</b>
							</td>
							<td>
								<Table style="margin-left:-3px;">
									<tr>
										<td>
											<input type="text" ng-model="lead.first_name_th__c" id="first_name_th__c" maxlength="40">
										</td>
										<td>
											<input type="text" ng-model="lead.last_name_th__c" id="last_name_th__c" maxlength="80">
											<label id="lbl_name_th__c"/>
										</td>
									</tr>
								</table>
							</td>
						</tr>
						
						<tr>
							<td align="right" class="CustomLayout2">
								Title
							</td>
							<td class="CustomLayout2">
								<b style="color=red">*</b>
							</td>
							<td>                       
								<select ng-model="lead.salutation" ng-options="x for x in salutation" id="pick_title_en__c"></select>
								<label id="lbl_title_en__c"/>
							</td>
						</tr>
						
						<tr>
							<td align="right" class="CustomLayout2">
								Student Name-surname/ชื่อ-สกุลนักศึกษา (Eng)
							</td>
							<td class="CustomLayout2">
								<b style="color=red">*</b>
							</td>
							<td>
								<Table style="margin-left:-3px;">
									<tr>
										<td>
											<input type="text" ng-model="lead.firstname" id="first_name_en__c">
										</td>
										<td>
											<input type="text" ng-model="lead.lastname" id="last_name_en__c">
											<label id="lbl_name_en__c"/>
										</td>
									</tr>
								</Table>
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Birthdate /วันเกิด
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="">
								<label id="lbl_mobilephone"/>
							</td>
						</tr>
						
						
						<tr>
							<td align="right">
								Mobile No/เบอร์โทร
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="lead.mobilephone">
								<label id="lbl_mobilephone"/>
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Email /อีเมลล์
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								 <input type="text" ng-model="lead.email" id="txtEmail">
								 <label id="lbl_email"/>
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Congenital disease /โรคประจำตัว
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								 <input type="text" ng-model="lead.congenital_disease__c">
								 <label id="lbl_congenital_disease__c" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Student ID /รหัสนักศึกษา
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="lead.student_id__c" id="txtstudent" maxlenght="10">
								<label id="lbl_student_id__c" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Faculty /คณะ
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="lead.faculty__c">
								<label id="lbl_faculty__c" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Year /ปีการศึกษา
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="">
								<label id="lbl_year__c" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Term /ภาคการศึกษา
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="">
								<label id="lbl_term__c" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Request Zone /เลือกโซน
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<!--  <input type="text" ng-model="lead.request_zone__c"> -->
								<select id="state"
							    ng-model="lead.request_zone__c"
							    ng-disabled="!lead.gender__c"
							    ng-options="z for z in zones" />
							    <label id="lbl_request_zone__c" />
							</td>
						</tr>
						
					
					</table></td>
					
				</tr>
				
				<!-- Student Information -->
				
				<tr style="height:5px">
					<td colspan="3"></td>
				</tr>
				
			</table>
			
			<table style="width:100%">
				
				<!-- Address Information -->
				
				<tr style="background-color: #C80000">
					<td colspan="3" align="left">
						<b style="color:white">Address Information / ข้อมูลที่อยู่ (ที่อยู่ตามภูมิลำเนา)</b>
					</td>
				</tr>
				
				<tr style="height:5px">
					<td colspan="3"></td>
				</tr>
				
				<tr>
					<td align="center"><table style="width:100%">
				
						<tr>
							<td align="right" class='CustomLayout1'>
								No. / Soi / Road (บ้านเลขที่ / ซอย / ถนน)
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td class='CustomLayout1'>
								<input type="text" ng-model="lead.street">
							</td>
						</tr>
						
						<tr>
							<td align="right">
								District (อำเภอ / เขต)
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="lead.city">
								<label id="lbl_city" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Province (จังหวัด)
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="lead.state">
								<label id="lbl_lead" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Postal Code (รหัสไปรษณีย์)
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="lead.postalcode">
								<label id="lbl_postalcode" />
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Country (ประเทศ)
							</td>
							<td>
								<b style="color=red">*</b>
							</td>
							<td>
								<input type="text" ng-model="lead.country">
								<label id="lbl_country" />
							</td>
						</tr>
						
					</table></td>
					
				</tr>
				
				<!-- Address Information -->
				
				<tr style="height:5px">
					<td colspan="3"></td>
				</tr>
				
			</table>
			
			<table style="width:100%">
			
				<!-- Parent Information -->
				
				<tr style="background-color: #C80000">
					<td colspan="3" align="left">
						<b style="color:white">Parent Information / ชื่อผู้ปกครอง</b>
					</td>
				</tr>
				
				<tr style="height:5px">
					<td colspan="3"></td>
				</tr>
				
				<tr>
					<td align="center"><table style="width:100%">
				
						<tr>
							<td align="right" class='CustomLayout1'>
								Name /ชื่อผู้ปกครอง
							</td>
							<td>
							</td>
							<td class='CustomLayout1'>
								<input type="text" ng-model="lead.parent_name__c"  postrender-action="alert('last posted');">
							</td>
						</tr>
						<tr>
							<td align="right">
								Telephone /เบอร์ติดต่อผู้ปกครอง
							</td>
							<td>
							</td>
							<td>
								<input type="text" ng-model="lead.parent_phone__c">
							</td>
						</tr>
						
						<tr>
							<td align="right">
								Parent Income (per year) /รายได้ผู้ปกครอง (ต่อปี)
							</td>
							<td>
							</td>
							<td>
								<input type="text" ng-model="">
							</td>
						</tr>
						
						
						<tr style="height:5px">
							<td colspan="3"></td>
						</tr>
						
						<tr>
							<td align="right" class='CustomLayout1'>
								Name /ชื่อผู้ปกครอง (2)
							</td>
							<td>
							</td>
							<td class='CustomLayout1'>
								<input type="text" ng-model="lead.parent_name_2__c">
							</td>
						</tr>
						<tr>
							<td align="right">
								Telephone /เบอร์ติดต่อผู้ปกครอง (2)
							</td>
							<td>
							</td>
							<td>
								<input type="text" ng-model="lead.parent_phone_2__c">
							</td>
						</tr>
						
					</table></td>
				
				</tr>
				
				<!-- Parent Information -->
			   
			</table>
			
			<br/><br/><center><button onclick="update();" style="background:limegreen; color:white; width:80px; height:30px">Save</button>
			
		</div>
	
	</body>
</html>